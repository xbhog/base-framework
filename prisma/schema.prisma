generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model keywords_table {
  id                      String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  keyword                 String    @unique
  volume                  String    @default("0")
  kd                      String    @default("0")
  last_intitle_checked_at DateTime? @db.Timestamptz(6)
  created_at              DateTime  @default(now()) @db.Timestamptz(6)
  updated_at              DateTime  @default(now()) @db.Timestamptz(6)
  search_month            String?
  intitle_count           String?
  ekgr                    String?
  action_disposition      String?
  analysis_note           String?
  keyword_type            String?
}

model user_credit_bonus {
  id           BigInt   @id @default(autoincrement())
  user_uuid    String
  bonus_type   String   @default("daily_login")
  bonus_date   DateTime @db.Date
  bonus_amount Int      @default(1)
  granted_at   DateTime @default(now()) @db.Timestamptz(6)
  metadata     Json     @default("{}")
  users        users    @relation(fields: [user_uuid], references: [uuid], onDelete: Cascade, onUpdate: NoAction)

  @@unique([user_uuid, bonus_type, bonus_date])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model user_credit_purchase {
  id               BigInt   @id @default(autoincrement())
  user_uuid        String
  request_id       String   @unique
  plan_type        String
  credit_amount    Int
  price_amount     Decimal  @db.Decimal(10, 2)
  currency         String   @default("USD")
  payment_status   String   @default("pending")
  payment_provider String   @default("creem")
  purchased_at     DateTime @default(now()) @db.Timestamptz(6)
  metadata         Json     @default("{}")
  users            users    @relation(fields: [user_uuid], references: [uuid], onDelete: Cascade, onUpdate: NoAction)
}

model users {
  id                   Int                    @id @default(autoincrement())
  uuid                 String                 @unique(map: "uuid_key")
  email                String
  nickname             String
  avatar_url           String
  locale               String?
  signin_type          String?
  signin_ip            String?
  signin_provider      String?
  signin_openid        String?
  created_at           DateTime?              @default(now()) @db.Timestamptz(6)
  update_time          DateTime?              @db.Timestamptz(6)
  user_credit_bonus    user_credit_bonus[]
  user_credit_purchase user_credit_purchase[]
}

model User_Base {
  id            String         @id @default(cuid())
  name          String?
  email         String?        @unique
  emailVerified Boolean        @default(false)
  image         String?
  createdAt     DateTime       @default(now())
  updatedAt     DateTime       @updatedAt
  accounts      Account_Base[]
  sessions      Session_Base[]
}

model Account_Base {
  id                    String    @id @default(cuid())
  accountId             String
  providerId            String
  userId                String
  accessToken           String?
  refreshToken          String?
  idToken               String?
  accessTokenExpiresAt  DateTime?
  refreshTokenExpiresAt DateTime?
  scope                 String?
  password              String?
  createdAt             DateTime  @default(now())
  updatedAt             DateTime  @updatedAt
  user                  User_Base @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([providerId, accountId])
  @@index([userId])
}

model Session_Base {
  id           String    @id @default(cuid())
  expiresAt    DateTime
  token        String    @unique
  createdAt    DateTime  @default(now())
  updatedAt    DateTime  @updatedAt
  ipAddress    String?
  userAgent    String?
  userId       String
  user         User_Base @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
}

model VerificationToken_Base {
  id         String   @id @default(cuid())
  identifier String
  value      String
  expiresAt  DateTime
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
}
